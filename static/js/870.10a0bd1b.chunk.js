"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[870],{3870:function(s,e,t){t.r(e),t.d(e,{default:function(){return cs}});var i=t(1413),o=t(5671),n=t(3144),r=t(136),l=t(8557),a=t(2791),c=t(364),u=t(6407),d=t(2555),f=t(885),h="ProfilInfo_descriptionBlock__WTypn",p="ProfilInfo_mainPhoto__9M0OB",m="ProfilInfo_mainPhotoBlock__MDDnG",x="ProfilInfo_profileInfo__pqoQv",j="ProfilInfo_editProfileButton__fpFwJ",v="ProfilInfo_contacts__Dv++f",_="ProfilInfo_customLabelFileInput__wRXSv",P="ProfilInfo_fullNameForm__WbW9s",b="ProfilInfo_fullNameFormDescription__YWigI",g=t(8388),N=t(8770),C=t(184),k=function(s){var e=(0,a.useState)(!1),t=(0,f.Z)(e,2),i=t[0],o=t[1],n=(0,a.useState)(s.status),r=(0,f.Z)(n,2),l=r[0],c=r[1];(0,a.useEffect)((function(){c(s.status)}),[s.status]);return(0,C.jsx)("div",{children:i?(0,C.jsx)("span",{children:(0,C.jsx)("input",{onChange:function(s){c(s.currentTarget.value)},onBlur:function(){o(!1),s.updateProfileStatusTC(l)},value:l,autoFocus:!0})}):(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{children:(0,C.jsx)("b",{children:"Status: "})}),(0,C.jsx)("span",{onDoubleClick:function(){o(!0)},children:s.status||"no status"})]})})},I=t(1117),S=t(3079),y=t(704),T=(0,y.Z)({form:"edit-profile"})((function(s){var e=s.handleSubmit,t=s.error,i=s.profile;return(0,C.jsx)("div",{className:x,children:(0,C.jsxs)("form",{onSubmit:e,children:[(0,C.jsx)("div",{children:(0,C.jsx)("button",{type:"submit",className:j,children:"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),t&&(0,C.jsx)("div",{children:t}),(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)("b",{children:"Full name: "}),(0,C.jsx)("span",{className:b,children:(0,I.Gr)("Full name","fullName",[S.C],I.II)})]}),(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)("b",{children:"Looking for a job:"}),(0,C.jsx)("span",{children:(0,I.Gr)("","lookingForAJob",[],I.II,{type:"checkbox"})})]}),(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)("b",{children:"Description:"})," ",(null===i||void 0===i?void 0:i.lookingForAJob)&&(0,C.jsx)("div",{children:(0,I.Gr)("Looking for a job Description","lookingForAJobDescription",[S.C],I.II)})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"About me:"}),(0,I.Gr)("About me","aboutMe",[S.C],I.gx)]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Contacts:"}),(0,C.jsx)("div",{children:Object.keys(null===i||void 0===i?void 0:i.contacts).map((function(s){return(0,C.jsxs)("div",{className:"".concat(v," + ").concat(P),children:[(0,C.jsx)("b",{children:s}),": ",(0,C.jsx)("span",{children:(0,I.Gr)(s,"contacts."+s,[],I.II)})]})}))})]})]})})})),w=function(s){var e=s.profile,t=s.profileStatus,i=s.updateProfileStatusTC,o=s.isOwner,n=s.savePhoto,r=s.saveProfile,l=(0,a.useState)(!1),c=(0,f.Z)(l,2),u=c[0],d=c[1];if(!e)return(0,C.jsx)(g.Z,{});return(0,C.jsxs)("div",{className:h,children:[(0,C.jsxs)("div",{className:m,children:[(0,C.jsx)("img",{src:(null===e||void 0===e?void 0:e.photos.large)||N,className:p}),o&&(0,C.jsx)("label",{className:"".concat(_),children:(0,C.jsx)("input",{type:"file",onChange:function(s){s.target.files&&n(s.target.files[0])}})})]}),u?(0,C.jsx)(T,{initialValues:e,profile:e,isOwner:o,onSubmit:function(s){r(s).then((function(){return d(!1)}))}}):(0,C.jsx)(M,{profile:e,isOwner:o,toEditMode:function(){return d(!0)}}),(0,C.jsx)(k,{status:t,updateProfileStatusTC:i})]})},M=function(s){var e=s.profile,t=s.isOwner,i=s.toEditMode;return(0,C.jsxs)("div",{className:x,children:[(0,C.jsx)("div",{children:t&&(0,C.jsx)("button",{className:j,onClick:function(){i()},children:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Full name: "}),(0,C.jsx)("span",{children:null===e||void 0===e?void 0:e.fullName})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Looking for a job: "}),(0,C.jsx)("span",{children:null!==e&&void 0!==e&&e.lookingForAJob?"\u0414\u0430":"\u041d\u0435\u0442"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Description: "}),(null===e||void 0===e?void 0:e.lookingForAJob)&&(0,C.jsxs)("span",{children:[" ",e.lookingForAJobDescription]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"About me: "}),(0,C.jsx)("span",{children:null===e||void 0===e?void 0:e.aboutMe})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Contacts:"}),(0,C.jsx)("div",{children:Object.keys(null===e||void 0===e?void 0:e.contacts).map((function(s){return null!=e&&(0,C.jsx)(A,{contactTitle:s,contactValue:e.contacts[s]},s)}))})]})]})},A=function(s){var e=s.contactTitle,t=s.contactValue;return(0,C.jsxs)("div",{className:v,children:[(0,C.jsx)("b",{children:e}),":",t]})},F="MyPosts_postsBlock__Mu0eN",O="MyPosts_postsBlockTitle__8-yvy",Z="MyPosts_newPostContainer__6gOUf",D="MyPosts_newPostBlock__NHACX",B="MyPosts_newPostTextarea__VLX16",J="MyPosts_addNewPostButtonContainer__d2vKN",U="MyPosts_addNewPostButton__msg9W",G="MyPosts_posts__gVldu",L="Post_item__Jp2LK",W="Post_itemAvatar__GtCuN",V="Post_itemText__x8WHy",E="Post_itemMessageWrapper__mPWcy",X="Post_itemMessage__zO3Lu",$="Post_itemTextMessage__UCAHm",z="Post_itemTextMessageTime__ItxuS",H="Post_itemLikes__xlsIJ",q="Post_likeImg__O+sG2",K=t(5827),Q=function(s){return(0,C.jsxs)("div",{className:L,children:[(0,C.jsx)("img",{className:W,src:s.currentProfilePhoto?s.currentProfilePhoto:N}),(0,C.jsxs)("div",{className:V,children:[(0,C.jsx)("div",{className:E,children:(0,C.jsxs)("div",{className:X,children:[(0,C.jsx)("div",{className:$,children:s.message}),(0,C.jsx)("div",{className:z,children:s.time})]})}),(0,C.jsxs)("div",{className:H,children:[(0,C.jsx)("img",{src:K,className:q}),s.likesCount]})]})]})},R=t(6139),Y=(0,S.D)(100),ss=(0,y.Z)({form:"ProfileAddNewPostForm"})((function(s){var e=s.handleSubmit,t=s.reset;return(0,C.jsx)("div",{className:Z,children:(0,C.jsx)("form",{onSubmit:e((function(e){s.onSubmit(e),t()})),children:(0,C.jsxs)("div",{className:D,children:[(0,C.jsx)("div",{className:B,children:(0,C.jsx)(R.Z,{component:I.gx,name:"newPostText",placeholder:"\u0412\u0432\u0435\u0434\u0438 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430",validate:[Y]})}),(0,C.jsx)("div",{className:J,children:(0,C.jsx)("button",{className:U,type:"submit",children:"Add post"})})]})})})})),es=a.memo((function(s){var e=(0,c.v9)((function(s){var e;return null===(e=s.profilePage.profile)||void 0===e?void 0:e.photos.small})),t=s.posts.map((function(s){return(0,C.jsx)(Q,{message:s.message,likesCount:s.likesCount,currentProfilePhoto:e,time:s.time},s.id)}));return(0,C.jsxs)("div",{className:F,children:[(0,C.jsx)("h3",{className:O,children:"My posts"}),(0,C.jsx)(ss,{onSubmit:function(e){s.addPost(e.newPostText)}}),(0,C.jsx)("div",{className:G,children:t})]})})),ts=(0,c.$j)((function(s){return{posts:s.profilePage.posts,newPostText:s.profilePage.newPostText}}),(function(s){return{addPost:function(e){s((0,u.Pi)(e))}}}))(es),is="Profile_profileContainer__9N8X7",os=function(s){return(0,C.jsxs)("div",{className:is,children:[(0,C.jsx)(w,{profile:s.profile,profileStatus:s.profileStatus,updateProfileStatusTC:s.updateProfileStatusTC,isOwner:s.isOwner,savePhoto:s.savePhoto,saveProfile:s.saveProfile}),s.isOwner&&(0,C.jsx)(ts,{})]})},ns=t(9271),rs=t(2163),ls=t(7781),as=function(s){(0,r.Z)(t,s);var e=(0,l.Z)(t);function t(){return(0,o.Z)(this,t),e.apply(this,arguments)}return(0,n.Z)(t,[{key:"refreshProfile",value:function(){var s=this.props.match.params.userId;s||(s=this.props.authorizedUserId+"")||this.props.history.push("/login"),this.props.getUserProfileTC(Number(s)),this.props.getUserStatusTC(Number(s))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e,t){this.props.match.params.userId!==s.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,C.jsx)(os,(0,i.Z)((0,i.Z)({},this.props),{},{profile:this.props.profile,updateProfileStatusTC:this.props.updateProfileStatusTC,profileStatus:this.props.profileStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),t}(a.Component),cs=(0,ls.qC)((0,c.$j)((function(s){return{profile:s.profilePage.profile,profileStatus:s.profilePage.profileStatus,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{toggleIsFetching:d.MO,getUserProfileTC:u.d$,getUserStatusTC:u.Qw,updateProfileStatusTC:u.xr,savePhoto:u.Ju,saveProfile:u.Ii}),ns.EN,rs.e)(as)},2163:function(s,e,t){t.d(e,{e:function(){return u}});var i=t(1413),o=t(5987),n=(t(2791),t(9271)),r=t(364),l=t(184),a=["isAuth"],c=function(s){return{isAuth:s.auth.isAuth}},u=function(s){return(0,r.$j)(c)((function(e){var t=e.isAuth,r=(0,o.Z)(e,a);return t?(0,l.jsx)(s,(0,i.Z)({},r)):(0,l.jsx)(n.l_,{to:"/login"})}))}},5827:function(s,e,t){s.exports=t.p+"static/media/like.63835df6ac58ce7ff53d.png"}}]);
//# sourceMappingURL=870.10a0bd1b.chunk.js.map